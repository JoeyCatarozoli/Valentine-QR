<!doctype html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Valentine?</title>
<style>
  body{
    margin:0;height:100vh;display:grid;place-items:center;
    background:radial-gradient(circle at top,#fff7cc,#ffd84d);
    font-family:system-ui,Arial;color:#7a5b00;overflow:hidden
  }
  h1{margin:0 0 12px;text-shadow:0 2px 0 rgba(255,255,255,.6)}
  .wrap{position:relative;width:100vw;height:100vh;display:grid;place-items:center}
  .stack{position:relative;z-index:2;text-align:center}
  button{border:0;border-radius:999px;font-weight:900;cursor:pointer;box-shadow:0 10px 24px rgba(0,0,0,.18)}
  #y{background:#ffeb3b;font-size:30px;padding:24px 52px}
  #n{position:fixed;background:#f59e0b;font-size:14px;padding:10px 18px;z-index:2}

  /* Pink hype screen */
  #hype{
    position:fixed;inset:0;display:none;place-items:center;z-index:4;
    background:radial-gradient(circle at center,#ffd1e8,#ff69b4);
    color:#7a003c;font-weight:1000;letter-spacing:4px;
    text-shadow:0 6px 0 rgba(255,255,255,.7), 0 16px 40px rgba(0,0,0,.25)
  }
  #hype span{font-size:clamp(56px, 18vw, 200px)}

  /* FX canvas above hype */
  canvas{position:fixed;inset:0;z-index:5;pointer-events:none}
</style>

<canvas id="fx"></canvas>

<div id="hype"><span>RRAAAHHHHH</span></div>

<div class="wrap" id="yesPage">
  <div class="stack">
    <h1>Will you be my Valentine? ðŸ’›</h1>
    <button id="y">YES ðŸ’›</button>
  </div>
  <button id="n">nope</button>
</div>

<script>
  // ---- roaming "No"
  const n = document.getElementById('n');
  const y = document.getElementById('y');
  const hype = document.getElementById('hype');
  const yesPage = document.getElementById('yesPage');
  const PAD = 16;
  const SPEED_MS = 420;

  function clamp(v,min,max){ return Math.min(Math.max(v,min),max); }
  function moveFast(){
    const maxX = innerWidth - n.offsetWidth - PAD;
    const maxY = innerHeight - n.offsetHeight - PAD;
    n.style.left = clamp(Math.random()*maxX, PAD, maxX) + 'px';
    n.style.top  = clamp(Math.random()*maxY, PAD, maxY) + 'px';
  }
  setInterval(moveFast, SPEED_MS);
  moveFast();
  addEventListener('resize', moveFast);

  // ---- Canvas fireworks (bigger + longer)
  const canvas = document.getElementById('fx');
  const ctx = canvas.getContext('2d');
  let DPR = Math.min(devicePixelRatio || 1, 2);
  function resize(){
    canvas.width = Math.floor(innerWidth * DPR);
    canvas.height = Math.floor(innerHeight * DPR);
    canvas.style.width = innerWidth + 'px';
    canvas.style.height = innerHeight + 'px';
    ctx.setTransform(DPR,0,0,DPR,0,0);
  }
  resize(); addEventListener('resize', resize);

  const particles = [];
  function spawnFirework(x, y, hue){
    const count = 180;
    for(let i=0;i<count;i++){
      const a = Math.random()*Math.PI*2;
      const s = 2.6 + Math.random()*6.8;
      particles.push({ x,y, vx:Math.cos(a)*s, vy:Math.sin(a)*s, life:1300+Math.random()*900, r:2.6+Math.random()*3.8, hue });
    }
  }
  function tick(dt){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    for(let i=particles.length-1;i>=0;i--){
      const p = particles[i];
      p.vy += 0.025; p.x += p.vx; p.y += p.vy; p.life -= dt;
      const a = Math.max(p.life/1300,0);
      ctx.beginPath();
      ctx.fillStyle = `hsla(${p.hue}, 95%, 60%, ${a})`;
      ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
      if(p.life<=0) particles.splice(i,1);
    }
  }
  let last = performance.now();
  function loop(now){
    const dt = Math.min(now-last,32); last = now;
    tick(dt); requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);

  // ---- Realistic July 4th audio: screamers, whistles, pops, crackle + BOOMS
  let audioCtx;
  function ensureAudio(){ if(!audioCtx) audioCtx = new (window.AudioContext||window.webkitAudioContext)(); }

  function boom(){
    ensureAudio();
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = 'sine';
    o.frequency.setValueAtTime(90 + Math.random()*20, audioCtx.currentTime);
    o.frequency.exponentialRampToValueAtTime(28, audioCtx.currentTime + 0.25);
    g.gain.setValueAtTime(0.001, audioCtx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.9, audioCtx.currentTime + 0.02);
    g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.5);
    o.connect(g).connect(audioCtx.destination);
    o.start(); o.stop(audioCtx.currentTime + 0.55);
  }

  function screamer(){
    ensureAudio();
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = 'square';
    o.frequency.setValueAtTime(1800 + Math.random()*800, audioCtx.currentTime);
    o.frequency.exponentialRampToValueAtTime(600, audioCtx.currentTime + 0.9);
    g.gain.setValueAtTime(0.001, audioCtx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.35, audioCtx.currentTime + 0.06);
    g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.9);
    o.connect(g).connect(audioCtx.destination);
    o.start(); o.stop(audioCtx.currentTime + 1.0);
  }

  function whistleGlide(){
    ensureAudio();
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = 'sine';
    o.frequency.setValueAtTime(900 + Math.random()*400, audioCtx.currentTime);
    o.frequency.linearRampToValueAtTime(1400 + Math.random()*600, audioCtx.currentTime + 0.6);
    g.gain.setValueAtTime(0.001, audioCtx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.25, audioCtx.currentTime + 0.08);
    g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.7);
    o.connect(g).connect(audioCtx.destination);
    o.start(); o.stop(audioCtx.currentTime + 0.75);
  }

  function pop(){
    ensureAudio();
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = 'triangle';
    o.frequency.setValueAtTime(1300 + Math.random()*500, audioCtx.currentTime);
    g.gain.setValueAtTime(0.001, audioCtx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.8, audioCtx.currentTime + 0.01);
    g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.16);
    o.connect(g).connect(audioCtx.destination);
    o.start(); o.stop(audioCtx.currentTime + 0.18);
  }

  function crackleRain(){
    ensureAudio();
    const duration = 0.9;
    const bufferSize = audioCtx.sampleRate * duration;
    const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
    const data = buffer.getChannelData(0);
    for(let i=0;i<bufferSize;i++){
      const t = i / bufferSize;
      data[i] = (Math.random()*2-1) * Math.pow(1 - t, 2.6);
    }
    const src = audioCtx.createBufferSource();
    const hp = audioCtx.createBiquadFilter();
    hp.type = 'highpass'; hp.frequency.value = 1000;
    const g = audioCtx.createGain();
    g.gain.value = 0.3;
    src.buffer = buffer;
    src.connect(hp).connect(g).connect(audioCtx.destination);
    src.start();
  }

  function fireworkSound(){
    boom(); // loud concussive boom
    screamer();
    setTimeout(whistleGlide, 120 + Math.random()*120);
    setTimeout(pop, 360 + Math.random()*160);
    setTimeout(crackleRain, 420 + Math.random()*200);
  }

  function launchShow(rounds=8){
    for(let i=0;i<rounds;i++){
      setTimeout(()=>{
        const x = Math.random()*innerWidth;
        const y = Math.random()*innerHeight*0.6 + 40;
        const hue = 320 + Math.random()*60; // pink/purple fireworks
        spawnFirework(x,y,hue);
        fireworkSound();
      }, i*420);
    }
  }

  function heartsOnHype(count=140){
    for(let i=0;i<count;i++){
      const d=document.createElement('div');
      d.textContent = Math.random()>0.25?'ðŸ’›':'ðŸ’–';
      d.style.position='fixed';
      d.style.left=Math.random()*100+'vw';
      d.style.bottom='-5vh';
      d.style.fontSize=(18+Math.random()*30)+'px';
      d.style.pointerEvents='none';
      d.style.zIndex = 6;
      document.body.appendChild(d);
      d.animate([{transform:'translateY(0)',opacity:1},{transform:'translateY(-120vh)',opacity:0}],
                {duration:2600+Math.random()*1600, easing:'linear'});
      setTimeout(()=>d.remove(), 4800);
    }
  }

  const SHOW_MS = 5200; // ~5 seconds
  y.onclick = () => {
    yesPage.style.visibility = 'hidden';
    hype.style.display = 'grid';

    heartsOnHype(160);
    launchShow(9);
    setTimeout(()=>heartsOnHype(120), 700);
    setTimeout(()=>launchShow(6), 1600);

    setTimeout(()=>{
      hype.style.display = 'none';
      yesPage.style.visibility = 'visible';
    }, SHOW_MS);
  };
</script>